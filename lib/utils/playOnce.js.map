{"version":3,"file":"playOnce.js","sources":["../../src/utils/playOnce.ts"],"sourcesContent":["import { getInstance } from '../instance';\r\n\r\n/**\r\n * Increment the alias for play once\r\n * @static\r\n * @default 0\r\n */\r\nlet PLAY_ID = 0;\r\n\r\n/**\r\n * Create a new \"Audio\" stream based on given audio path and project uri; returns the audio object.\r\n * @memberof utils\r\n * @param url - Full path of the file to play.\r\n * @param {Function} callback - Callback when complete.\r\n * @return New audio element alias.\r\n */\r\nfunction playOnce(url: string, callback?: (err?: Error) => void): string\r\n{\r\n    const alias = `alias${PLAY_ID++}`;\r\n\r\n    getInstance().add(alias, {\r\n        url,\r\n        preload: true,\r\n        autoPlay: true,\r\n        loaded: (err: Error) =>\r\n        {\r\n            if (err)\r\n            {\r\n                console.error(err);\r\n                getInstance().remove(alias);\r\n                if (callback)\r\n                {\r\n                    callback(err);\r\n                }\r\n            }\r\n        },\r\n        complete: () =>\r\n        {\r\n            getInstance().remove(alias);\r\n            if (callback)\r\n            {\r\n                callback(null);\r\n            }\r\n        },\r\n    });\r\n\r\n    return alias;\r\n}\r\n\r\nexport { PLAY_ID, playOnce };\r\n"],"names":["PLAY_ID","getInstance"],"mappings":";;;;AAOIA,eAAU,GAAA,EAAA;AASd,SAAS,QAAA,CAAS,KAAa,QAC/B,EAAA;AACI,EAAA,MAAM,QAAQ,CAAQ,KAAA,EAAAA,eAAA,EAAA,CAAA,CAAA,CAAA;AAEtB,EAAYC,oBAAA,EAAA,CAAE,IAAI,KAAO,EAAA;AAAA,IACrB,GAAA;AAAA,IACA,OAAS,EAAA,IAAA;AAAA,IACT,QAAU,EAAA,IAAA;AAAA,IACV,MAAA,EAAQ,CAAC,GACT,KAAA;AACI,MAAA,IAAI,GACJ,EAAA;AACI,QAAA,OAAA,CAAQ,MAAM,GAAG,CAAA,CAAA;AACjB,QAAYA,oBAAA,EAAA,CAAE,OAAO,KAAK,CAAA,CAAA;AAC1B,QAAA,IAAI,QACJ,EAAA;AACI,UAAA,QAAA,CAAS,GAAG,CAAA,CAAA;AAAA,SAChB;AAAA,OACJ;AAAA,KACJ;AAAA,IACA,UAAU,MACV;AACI,MAAYA,oBAAA,EAAA,CAAE,OAAO,KAAK,CAAA,CAAA;AAC1B,MAAA,IAAI,QACJ,EAAA;AACI,QAAA,QAAA,CAAS,IAAI,CAAA,CAAA;AAAA,OACjB;AAAA,KACJ;AAAA,GACH,CAAA,CAAA;AAED,EAAO,OAAA,KAAA,CAAA;AACX;;;;"}