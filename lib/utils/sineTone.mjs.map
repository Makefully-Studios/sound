{"version":3,"file":"sineTone.mjs","sources":["../../src/utils/sineTone.ts"],"sourcesContent":["import { Sound } from '../Sound';\r\nimport { WebAudioContext } from '../webaudio/WebAudioContext';\r\nimport { WebAudioMedia } from '../webaudio/WebAudioMedia';\r\n\r\n/**\r\n * Create a new sound for a sine wave-based tone.  **Only supported with WebAudio**\r\n * @memberof utils\r\n * @param hertz - Frequency of sound.\r\n * @param seconds - Duration of sound in seconds.\r\n * @return New sound.\r\n */\r\nfunction sineTone(hertz = 200, seconds = 1): Sound\r\n{\r\n    const sound = Sound.from({\r\n        singleInstance: true,\r\n    });\r\n\r\n    if (!(sound.media instanceof WebAudioMedia))\r\n    {\r\n        return sound;\r\n    }\r\n\r\n    const media = sound.media as WebAudioMedia;\r\n    const context = sound.context as WebAudioContext;\r\n\r\n    // set default value\r\n    const nChannels = 1;\r\n    const sampleRate = 48000;\r\n    const amplitude = 2;\r\n\r\n    // create the buffer\r\n    const buffer = context.audioContext.createBuffer(\r\n        nChannels,\r\n        seconds * sampleRate,\r\n        sampleRate,\r\n    );\r\n    const fArray = buffer.getChannelData(0);\r\n\r\n    // fill the buffer\r\n    for (let i = 0; i < fArray.length; i++)\r\n    {\r\n        const time = i / buffer.sampleRate;\r\n        const angle = hertz * time * 2 * Math.PI;\r\n\r\n        fArray[i] = Math.sin(angle) * amplitude;\r\n    }\r\n\r\n    // set the buffer\r\n    media.buffer = buffer;\r\n    sound.isLoaded = true;\r\n\r\n    return sound;\r\n}\r\n\r\nexport { sineTone };\r\n"],"names":[],"mappings":";;;AAWA,SAAS,QAAS,CAAA,KAAA,GAAQ,GAAK,EAAA,OAAA,GAAU,CACzC,EAAA;AACI,EAAM,MAAA,KAAA,GAAQ,MAAM,IAAK,CAAA;AAAA,IACrB,cAAgB,EAAA,IAAA;AAAA,GACnB,CAAA,CAAA;AAED,EAAI,IAAA,EAAE,KAAM,CAAA,KAAA,YAAiB,aAC7B,CAAA,EAAA;AACI,IAAO,OAAA,KAAA,CAAA;AAAA,GACX;AAEA,EAAA,MAAM,QAAQ,KAAM,CAAA,KAAA,CAAA;AACpB,EAAA,MAAM,UAAU,KAAM,CAAA,OAAA,CAAA;AAGtB,EAAA,MAAM,SAAY,GAAA,CAAA,CAAA;AAClB,EAAA,MAAM,UAAa,GAAA,IAAA,CAAA;AACnB,EAAA,MAAM,SAAY,GAAA,CAAA,CAAA;AAGlB,EAAM,MAAA,MAAA,GAAS,QAAQ,YAAa,CAAA,YAAA;AAAA,IAChC,SAAA;AAAA,IACA,OAAU,GAAA,UAAA;AAAA,IACV,UAAA;AAAA,GACJ,CAAA;AACA,EAAM,MAAA,MAAA,GAAS,MAAO,CAAA,cAAA,CAAe,CAAC,CAAA,CAAA;AAGtC,EAAA,KAAA,IAAS,CAAI,GAAA,CAAA,EAAG,CAAI,GAAA,MAAA,CAAO,QAAQ,CACnC,EAAA,EAAA;AACI,IAAM,MAAA,IAAA,GAAO,IAAI,MAAO,CAAA,UAAA,CAAA;AACxB,IAAA,MAAM,KAAQ,GAAA,KAAA,GAAQ,IAAO,GAAA,CAAA,GAAI,IAAK,CAAA,EAAA,CAAA;AAEtC,IAAA,MAAA,CAAO,CAAC,CAAA,GAAI,IAAK,CAAA,GAAA,CAAI,KAAK,CAAI,GAAA,SAAA,CAAA;AAAA,GAClC;AAGA,EAAA,KAAA,CAAM,MAAS,GAAA,MAAA,CAAA;AACf,EAAA,KAAA,CAAM,QAAW,GAAA,IAAA,CAAA;AAEjB,EAAO,OAAA,KAAA,CAAA;AACX;;;;"}