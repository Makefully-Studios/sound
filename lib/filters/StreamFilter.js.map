{"version":3,"file":"StreamFilter.js","sources":["../../src/filters/StreamFilter.ts"],"sourcesContent":["import { getInstance } from '../instance';\r\nimport { Filter } from './Filter';\r\n\r\n/**\r\n * Export a MediaStream to be recorded\r\n *\r\n * @memberof filters\r\n */\r\nclass StreamFilter extends Filter\r\n{\r\n    private _stream: MediaStream;\r\n\r\n    constructor()\r\n    {\r\n        let destination: MediaStreamAudioDestinationNode;\r\n        let source: MediaStreamAudioSourceNode;\r\n\r\n        if (!getInstance().useLegacy)\r\n        {\r\n            const { audioContext } = getInstance().context;\r\n\r\n            destination = audioContext.createMediaStreamDestination();\r\n            source = audioContext.createMediaStreamSource(destination.stream);\r\n        }\r\n\r\n        super(destination, source);\r\n        this._stream = destination?.stream;\r\n    }\r\n\r\n    public get stream(): MediaStream\r\n    {\r\n        return this._stream;\r\n    }\r\n\r\n    public destroy(): void\r\n    {\r\n        this._stream = null;\r\n        super.destroy();\r\n    }\r\n}\r\n\r\nexport { StreamFilter };\r\n"],"names":["Filter","getInstance"],"mappings":";;;;;AAQA,MAAM,qBAAqBA,aAC3B,CAAA;AAAA,EAGI,WACA,GAAA;AACI,IAAI,IAAA,WAAA,CAAA;AACJ,IAAI,IAAA,MAAA,CAAA;AAEJ,IAAI,IAAA,CAACC,oBAAY,EAAA,CAAE,SACnB,EAAA;AACI,MAAA,MAAM,EAAE,YAAA,EAAiB,GAAAA,oBAAA,EAAc,CAAA,OAAA,CAAA;AAEvC,MAAA,WAAA,GAAc,aAAa,4BAA6B,EAAA,CAAA;AACxD,MAAS,MAAA,GAAA,YAAA,CAAa,uBAAwB,CAAA,WAAA,CAAY,MAAM,CAAA,CAAA;AAAA,KACpE;AAEA,IAAA,KAAA,CAAM,aAAa,MAAM,CAAA,CAAA;AACzB,IAAA,IAAA,CAAK,UAAU,WAAa,EAAA,MAAA,CAAA;AAAA,GAChC;AAAA,EAEA,IAAW,MACX,GAAA;AACI,IAAA,OAAO,IAAK,CAAA,OAAA,CAAA;AAAA,GAChB;AAAA,EAEO,OACP,GAAA;AACI,IAAA,IAAA,CAAK,OAAU,GAAA,IAAA,CAAA;AACf,IAAA,KAAA,CAAM,OAAQ,EAAA,CAAA;AAAA,GAClB;AACJ;;;;"}