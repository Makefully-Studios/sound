{"version":3,"file":"StereoFilter.js","sources":["../../src/filters/StereoFilter.ts"],"sourcesContent":["import { getInstance } from '../instance';\r\nimport { WebAudioUtils } from '../webaudio/WebAudioUtils';\r\nimport { Filter } from './Filter';\r\n\r\n/**\r\n * Filter for adding Stereo panning.\r\n *\r\n * @memberof filters\r\n */\r\nclass StereoFilter extends Filter\r\n{\r\n    /** The stereo panning node */\r\n    private _stereo: StereoPannerNode;\r\n\r\n    /** The stereo panning node */\r\n    private _panner: PannerNode;\r\n\r\n    /** The amount of panning, -1 is left, 1 is right, 0 is centered */\r\n    private _pan: number;\r\n\r\n    /** @param pan - The amount of panning, -1 is left, 1 is right, 0 is centered. */\r\n    constructor(pan = 0)\r\n    {\r\n        let stereo: StereoPannerNode;\r\n        let panner: PannerNode;\r\n        let destination: AudioNode;\r\n\r\n        if (!getInstance().useLegacy)\r\n        {\r\n            const { audioContext } = getInstance().context;\r\n\r\n            if (audioContext.createStereoPanner)\r\n            {\r\n                stereo = audioContext.createStereoPanner();\r\n                destination = stereo;\r\n            }\r\n            else\r\n            {\r\n                panner = audioContext.createPanner();\r\n                panner.panningModel = 'equalpower';\r\n                destination = panner;\r\n            }\r\n        }\r\n\r\n        super(destination);\r\n\r\n        this._stereo = stereo;\r\n        this._panner = panner;\r\n\r\n        this.pan = pan;\r\n    }\r\n\r\n    /** Set the amount of panning, where -1 is left, 1 is right, and 0 is centered */\r\n    set pan(value: number)\r\n    {\r\n        this._pan = value;\r\n        if (this._stereo)\r\n        {\r\n            WebAudioUtils.setParamValue(this._stereo.pan, value);\r\n        }\r\n        else if (this._panner)\r\n        {\r\n            this._panner.setPosition(value, 0, 1 - Math.abs(value));\r\n        }\r\n    }\r\n    get pan(): number\r\n    {\r\n        return this._pan;\r\n    }\r\n\r\n    public destroy(): void\r\n    {\r\n        super.destroy();\r\n        this._stereo = null;\r\n        this._panner = null;\r\n    }\r\n}\r\n\r\nexport { StereoFilter };\r\n"],"names":["Filter","getInstance","WebAudioUtils"],"mappings":";;;;;;AASA,MAAM,qBAAqBA,aAC3B,CAAA;AAAA;AAAA,EAWI,WAAA,CAAY,MAAM,CAClB,EAAA;AACI,IAAI,IAAA,MAAA,CAAA;AACJ,IAAI,IAAA,MAAA,CAAA;AACJ,IAAI,IAAA,WAAA,CAAA;AAEJ,IAAI,IAAA,CAACC,oBAAY,EAAA,CAAE,SACnB,EAAA;AACI,MAAA,MAAM,EAAE,YAAA,EAAiB,GAAAA,oBAAA,EAAc,CAAA,OAAA,CAAA;AAEvC,MAAA,IAAI,aAAa,kBACjB,EAAA;AACI,QAAA,MAAA,GAAS,aAAa,kBAAmB,EAAA,CAAA;AACzC,QAAc,WAAA,GAAA,MAAA,CAAA;AAAA,OAGlB,MAAA;AACI,QAAA,MAAA,GAAS,aAAa,YAAa,EAAA,CAAA;AACnC,QAAA,MAAA,CAAO,YAAe,GAAA,YAAA,CAAA;AACtB,QAAc,WAAA,GAAA,MAAA,CAAA;AAAA,OAClB;AAAA,KACJ;AAEA,IAAA,KAAA,CAAM,WAAW,CAAA,CAAA;AAEjB,IAAA,IAAA,CAAK,OAAU,GAAA,MAAA,CAAA;AACf,IAAA,IAAA,CAAK,OAAU,GAAA,MAAA,CAAA;AAEf,IAAA,IAAA,CAAK,GAAM,GAAA,GAAA,CAAA;AAAA,GACf;AAAA;AAAA,EAGA,IAAI,IAAI,KACR,EAAA;AACI,IAAA,IAAA,CAAK,IAAO,GAAA,KAAA,CAAA;AACZ,IAAA,IAAI,KAAK,OACT,EAAA;AACI,MAAAC,2BAAA,CAAc,aAAc,CAAA,IAAA,CAAK,OAAQ,CAAA,GAAA,EAAK,KAAK,CAAA,CAAA;AAAA,KACvD,MAAA,IACS,KAAK,OACd,EAAA;AACI,MAAK,IAAA,CAAA,OAAA,CAAQ,YAAY,KAAO,EAAA,CAAA,EAAG,IAAI,IAAK,CAAA,GAAA,CAAI,KAAK,CAAC,CAAA,CAAA;AAAA,KAC1D;AAAA,GACJ;AAAA,EACA,IAAI,GACJ,GAAA;AACI,IAAA,OAAO,IAAK,CAAA,IAAA,CAAA;AAAA,GAChB;AAAA,EAEO,OACP,GAAA;AACI,IAAA,KAAA,CAAM,OAAQ,EAAA,CAAA;AACd,IAAA,IAAA,CAAK,OAAU,GAAA,IAAA,CAAA;AACf,IAAA,IAAA,CAAK,OAAU,GAAA,IAAA,CAAA;AAAA,GACnB;AACJ;;;;"}